---
// src/pages/index.astro
import BaseLayout from "@/components/layout/BaseLayout.astro";
import { Image } from "astro:assets";
import { getPosts } from "@/lib/hashnode";
import { formatDate } from "@/utils/helpers";
import {
	ChevronRightIcon,
	ArrowLongRightIcon,
	DocumentIcon,
	BriefcaseIcon,
	RssIcon,
} from "@heroicons/react/24/outline";

const { posts: latestPosts } = await getPosts({ limit: 3 });
---

<BaseLayout
	title="Jacob Weinbren - Web Developer & GIS Specialist"
	description="Full Stack Developer and GIS Specialist specialising in web development, data science, and geographic information systems."
>
	<!-- Hero Section -->
	<section
		class="relative min-h-[20vh] flex items-center justify-center bg-gradient-to-br from-green-400 to-green-600 text-white py-20"
	>
		<div class="absolute inset-0 bg-grid-pattern opacity-10"></div>
		<div class="relative text-center">
			<h1
				class="text-4xl sm:text-5xl md:text-6xl font-bold tracking-tight mb-4 animate-fade-in"
			>
				Jacob Weinbren
			</h1>
			<p
				class="text-lg sm:text-xl md:text-2xl text-white/90 max-w-2xl mx-auto leading-relaxed animate-fade-in delay-100"
			>
				Web Developer & GIS Specialist
			</p>
		</div>
	</section>

	<!-- Navigation Grid -->
	<section class="bg-white py-16">
		<div class="max-w-7xl mx-auto px-4 sm:px-6">
			<div class="grid grid-cols-1 md:grid-cols-3 gap-8">
				<a
					href="/resume.pdf"
					download="Jacob Weinbren - Resume.pdf.pdf"
					class="group flex flex-col items-center justify-center p-8 bg-gray-50 rounded-xl hover:bg-green-50 transition-colors duration-300"
				>
					<DocumentIcon className="h-12 w-12 text-green-600 mb-4" />
					<h3
						class="text-xl font-semibold text-gray-900 group-hover:text-green-600 transition-colors duration-300"
					>
						CV
					</h3>
					<p class="text-gray-600 mt-2 text-center">
						Download my curriculum vitae.
					</p>
				</a>
				<a
					href="/portfolio"
					class="group flex flex-col items-center justify-center p-8 bg-gray-50 rounded-xl hover:bg-green-50 transition-colors duration-300"
				>
					<BriefcaseIcon className="h-12 w-12 text-green-600 mb-4" />
					<h3
						class="text-xl font-semibold text-gray-900 group-hover:text-green-600 transition-colors duration-300"
					>
						Portfolio
					</h3>
					<p class="text-gray-600 mt-2 text-center">
						Explore projects showcasing my development and GIS
						skills.
					</p>
				</a>
				<a
					href="/blog"
					class="group flex flex-col items-center justify-center p-8 bg-gray-50 rounded-xl hover:bg-green-50 transition-colors duration-300"
				>
					<RssIcon className="h-12 w-12 text-green-600 mb-4" />
					<h3
						class="text-xl font-semibold text-gray-900 group-hover:text-green-600 transition-colors duration-300"
					>
						Blog
					</h3>
					<p class="text-gray-600 mt-2 text-center">
						Read my thoughts on technology, GIS, and other topics.
					</p>
				</a>
			</div>
		</div>
	</section>

	<!-- Featured Posts Section -->
	<section class="py-20 bg-gray-100">
		<div class="max-w-7xl mx-auto px-4 sm:px-6">
			<div class="text-center mb-12">
				<h2 class="text-3xl sm:text-4xl font-bold text-gray-900">
					Latest Blog Posts
				</h2>
				<p class="mt-4 text-lg text-gray-600">
					Recent articles from my blog.
				</p>
			</div>

			<div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
				{
					latestPosts.map((post, index) => (
						<a
							href={`/blog/post/${post.slug}`}
							class="group relative bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 flex flex-col"
							style={`animation: fadeIn 0.5s ease-out ${index * 0.2}s forwards;`}
						>
							{post.coverImage && (
								<div class="relative h-48 overflow-hidden">
									<Image
										src={post.coverImage}
										alt=""
										width={400}
										height={200}
										class="w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-500"
									/>
								</div>
							)}
							<div class="p-6 flex flex-col flex-grow">
								<time
									datetime={post.publishedAt}
									class="text-sm text-green-600 font-medium"
								>
									{formatDate(post.publishedAt)}
								</time>
								<h3 class="mt-2 text-xl font-bold text-gray-900 group-hover:text-green-600 transition-colors duration-300 line-clamp-2">
									{post.title}
								</h3>
								<p class="mt-3 text-gray-600 line-clamp-2 flex-grow">
									{post.subtitle}
								</p>

								<div class="mt-4 flex items-center text-green-600">
									<span class="text-sm font-medium">
										Read more
									</span>
									<ChevronRightIcon className="ml-2 w-4 h-4 transform group-hover:translate-x-1 transition-transform" />
								</div>
							</div>
						</a>
					))
				}
			</div>

			<div class="text-center mt-12">
				<a
					href="/blog"
					class="inline-flex items-center px-6 py-3 rounded-lg bg-green-50 text-green-600 font-medium hover:bg-green-100 transition-all duration-300"
				>
					View all blog posts
					<ArrowLongRightIcon className="ml-2 w-5 h-5" />
				</a>
			</div>
		</div>
	</section>
</BaseLayout>
