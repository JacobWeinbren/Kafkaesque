---
// src/pages/index.astro
import BaseLayout from "@/components/layout/BaseLayout.astro";
import { Image } from "astro:assets";
import { getPosts } from "@/lib/hashnode";
import { formatDate } from "@/utils/helpers";
import {
	ArrowRightIcon,
	ChevronRightIcon,
	ArrowLongRightIcon,
} from "@heroicons/react/24/outline";

const { posts: latestPosts } = await getPosts({ limit: 3 });
---

<BaseLayout
	title="Jacob Weinbren - Developer and Writer"
	description="Full Stack Developer and Writer specializing in web development, data science, and literature."
>
	<!-- Hero Section -->
	<section class="relative min-h-[90vh] flex items-center">
		<div
			class="absolute inset-0 bg-gradient-to-br from-green-400 to-green-600 opacity-90"
		>
		</div>
		<div class="absolute inset-0 bg-grid-pattern opacity-10"></div>

		<div class="relative max-w-7xl mx-auto px-4 sm:px-6 py-20 text-white">
			<div class="space-y-8 animate-fade-in">
				<h1
					class="text-5xl sm:text-6xl lg:text-7xl font-bold tracking-tight max-w-4xl"
				>
					Jacob Weinbren
				</h1>

				<p
					class="text-xl sm:text-2xl text-white/90 max-w-2xl leading-relaxed"
				>
					Full Stack Developer and Writer exploring the intersection
					of technology, data science, and storytelling.
				</p>

				<div class="flex flex-wrap gap-4 pt-4">
					<a
						href="/blog"
						class="group inline-flex items-center px-8 py-4 rounded-lg bg-white text-green-600 font-medium hover:bg-green-50 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-green-500"
					>
						Read Blog
						<ArrowRightIcon
							className="ml-2 w-5 h-5 transform group-hover:translate-x-1 transition-transform"
						/>
					</a>
					<a
						href="/about"
						class="inline-flex items-center px-8 py-4 rounded-lg border-2 border-white text-white font-medium hover:bg-white hover:text-green-600 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-green-500"
					>
						About Me
					</a>
				</div>
			</div>
		</div>
	</section>

	<!-- Featured Posts Section -->
	<section class="py-20 bg-white">
		<div class="max-w-7xl mx-auto px-4 sm:px-6">
			<div class="text-center mb-12">
				<h2 class="text-3xl sm:text-4xl font-bold text-gray-900">
					Latest Posts
				</h2>
				<p class="mt-4 text-lg text-gray-600">
					Exploring ideas through code, data, and words.
				</p>
			</div>

			<div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
				{
					latestPosts.map((post, index) => (
						<a
							href={`/post/${post.slug}`}
							class="group relative bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 flex flex-col"
							style={`animation: fadeIn 0.5s ease-out ${index * 0.2}s forwards;`}
						>
							{post.coverImage && (
								<div class="relative h-48 overflow-hidden">
									<Image
										src={post.coverImage}
										alt=""
										width={400}
										height={200}
										class="w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-500"
									/>
								</div>
							)}
							<div class="p-6 flex flex-col flex-grow">
								<time
									datetime={post.publishedAt}
									class="text-sm text-green-600 font-medium"
								>
									{formatDate(post.publishedAt)}
								</time>
								<h3 class="mt-2 text-xl font-bold text-gray-900 group-hover:text-green-600 transition-colors duration-300 line-clamp-2">
									{post.title}
								</h3>
								<p class="mt-3 text-gray-600 line-clamp-2 flex-grow">
									{post.subtitle}
								</p>

								<div class="mt-4 flex items-center text-green-600">
									<span class="text-sm font-medium">
										Read more
									</span>
									<ChevronRightIcon className="ml-2 w-4 h-4 transform group-hover:translate-x-1 transition-transform" />
								</div>
							</div>
						</a>
					))
				}
			</div>

			<div class="text-center mt-12">
				<a
					href="/blog"
					class="inline-flex items-center px-6 py-3 rounded-lg bg-green-50 text-green-600 font-medium hover:bg-green-100 transition-all duration-300"
				>
					View all posts
					<ArrowLongRightIcon className="ml-2 w-5 h-5" />
				</a>
			</div>
		</div>
	</section>
</BaseLayout>
